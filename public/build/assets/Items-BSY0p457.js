import{j as e}from"./AboutHeader-CpM0iYLI.js";import{B as Ne}from"./Base-CPqScOfP.js";import{S as W}from"./SwitchFormGroup-Cv62QkRk.js";import{r as n}from"./index-B80Lgev0.js";import{c as ke}from"./ReactAppend-CBRQCQGz.js";import{r as ie}from"./DxBox-CdMuSyGE.js";import{S as ue}from"./ItemVariants-CbycEICU.js";import{I as Se}from"./ItemsRest-DaHsoVkP.js";import{M as Ce}from"./Modal-Dbgjpj-3.js";import{m as De}from"./main-Br9xqDfn.js";import{I as ce}from"./ImageFormGroup-CUCbODBj.js";import{I as S}from"./InputFormGroup-CFHZRLOG.js";import{S as _e,a as Ie}from"./SetSelectValue-BLZOyhjK.js";import{S as ne}from"./SelectFormGroup-obMNjHUG.js";import{D as ae}from"./DxButton-CsjWvhyj.js";import{C as Fe}from"./CreateReactScript-CyT_ENnh.js";import{N as oe}from"./Number2Currency-e57Tgsuk.js";import{R as L}from"./ReactAppend-C-tNgxIf.js";import{R as $e}from"./index-B1nVdsa0.js";import{C as Pe}from"./ColorsRest-CcbDVEDv.js";import{S as Te}from"./SizesRest-BJN04gD4.js";import"./tippy-react.esm-CHhA99mn.js";import"./index-DO3Aws4m.js";/* empty css              */import"./Logout-Cj6nvmS-.js";import"./index.esm-Cu-mVv1q.js";import"./___vite-browser-external_commonjs-proxy-C9-083JZ.js";import"./WhatsAppModal-rzbTKlVY.js";import"./Results-B-D6O2Fz.js";/* empty css               */import"./index-CqrOtH36.js";const Ee=({gridRef:o,rest:f,columns:I,toolBar:h,masterDetail:x,filterValue:A,onRefresh:m=()=>{}})=>(n.useEffect(()=>{DevExpress.localization.locale(navigator.language),$(o.current).dxDataGrid({language:"es",dataSource:{load:async d=>{const v=await f.paginate({...d});return m(v),v}},onToolbarPreparing:d=>{const{items:v}=d.toolbarOptions;h(v)},remoteOperations:!0,columnResizingMode:"widget",allowColumnResizing:!0,allowColumnReordering:!0,columnAutoWidth:!0,scrollbars:"auto",filterPanel:{visible:!0},searchPanel:{visible:!0},headerFilter:{visible:!0,search:{enabled:!0}},height:"calc(100vh - 185px)",filterValue:A,rowAlternationEnabled:!0,showBorders:!0,filterRow:{visible:!0,applyFilter:"auto"},filterBuilderPopup:{visible:!1,position:{of:window,at:"top",my:"top",offset:{y:10}}},paging:{pageSize:10},pager:{visible:!0,allowedPageSizes:[5,10,25,50,100],showPageSizeSelector:!0,showInfo:!0,showNavigationButtons:!0},allowFiltering:!0,scrolling:{mode:"standard",useNative:!0,preloadEnabled:!0,rowRenderingMode:"standard"},columnChooser:{title:"Mostrar/Ocultar columnas",enabled:!0,mode:"select",search:{enabled:!0}},columns:I,masterDetail:x,onContentReady:(...d)=>{tippy(".tippy-here",{arrow:!0,animation:"scale"})}}).dxDataGrid("instance"),tippy(".dx-button",{arrow:!0})},[null]),e.jsx("div",{ref:o})),Ae=({title:o,gridRef:f,rest:I,columns:h,toolBar:x,masterDetail:A,filterValue:m=[],onRefresh:d})=>e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card",children:[typeof o=="object"?e.jsx("div",{className:"card-header",children:o}):"",e.jsxs("div",{className:"card-body",children:[typeof o!="object"?e.jsxs("h4",{className:"header-title",children:[e.jsx("div",{id:"header-title-options",className:"float-end"}),e.jsx("span",{id:"header-title-prefix"})," Lista de ",o," ",e.jsx("span",{id:"header-title-suffix"})]}):"",e.jsx(Ee,{gridRef:f,rest:I,columns:h.filter(Boolean),toolBar:x,masterDetail:A,filterValue:m,onRefresh:d})]})]})})}),ze=({itemId:o,colors:f,sizes:I})=>{const[h,x]=n.useState([]),[A,m]=n.useState(!1),[d,v]=n.useState(null);n.useRef(),n.useRef();const j=n.useRef(),l=n.useRef(),R=n.useRef(),y=n.useRef(),w=n.useRef(),N=n.useRef(),P=n.useRef();n.useEffect(()=>{o&&(m(!0),fetch(`/api/item-variants/by-item/${o}`).then(i=>i.json()).then(i=>{x(i.data||[]),m(!1)}))},[o]);const U=i=>{v(i);const c=h[i];j.current&&(j.current.value=c.color_id||"",window.$&&window.$(j.current).val(c.color_id||"").trigger("change.select2")),l.current&&(l.current.value=c.zise_id||"",window.$&&window.$(l.current).val(c.zise_id||"").trigger("change.select2")),R.current&&(R.current.value=c.stock||""),y.current&&(y.current.value=c.min_stock||""),w.current&&(w.current.value=c.price||""),N.current&&(N.current.value=c.discount||""),P.current&&(P.current.value=c.final_price||"")},z=()=>{v(null),C()},C=()=>{j.current&&(j.current.value=""),l.current&&(l.current.value=""),R.current&&(R.current.value=""),y.current&&(y.current.value=""),w.current&&(w.current.value=""),N.current&&(N.current.value=""),P.current&&(P.current.value="")},B=async i=>{const{isConfirmed:c}=await ue.fire({title:"Eliminar variante",text:"¿Estás seguro de eliminar esta variante?",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"});c&&(await fetch(`/api/item-variants/${i}`,{method:"DELETE"}),x(D=>D.filter(k=>k.id!==i)))},G=async i=>{i.preventDefault&&i.preventDefault();const c=j.current?j.current.value:"",D=l.current?l.current.value:"",k=R.current?R.current.value:"",J=y.current?y.current.value:"",T=w.current?w.current.value:"",M=N.current?N.current.value:"",O=g=>g==null||String(g).trim()==="";if(O(k)||O(T)){alert("Completa todos los campos obligatorios: Stock y Precio.");return}let se=T;M&&parseFloat(M)>0&&(se=M);const Y={color_id:c,zise_id:D,stock:k,min_stock:J,price:T,discount:M,final_price:se,item_id:o};d!==null&&(Y.id=h[d].id);const X=await(await fetch("/api/item-variants/save",{method:"POST",headers:{"Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(De.Cookies.get("XSRF-TOKEN"))},body:JSON.stringify(Y)})).json();X.status===200&&(x(d!==null?g=>g.map((_,Z)=>Z===d?X.data:_):g=>[...g,X.data]),C(),v(null))};return e.jsxs("div",{children:[e.jsx("h5",{children:"Variantes (Color + Talla)"}),e.jsxs("div",{className:"row g-2 align-items-center",id:"item-variants-form",style:{alignItems:"center"},children:[e.jsx("div",{className:"col-md-2",children:e.jsxs(ne,{label:"Color",name:"color_id",eRef:j,required:!0,dropdownParent:"#item-variants-form",children:[e.jsx("option",{value:"",children:"Seleccionar"}),f.map(i=>e.jsx("option",{value:i.id,children:i.name},i.id))]})}),e.jsx("div",{className:"col-md-2",children:e.jsxs(ne,{label:"Talla",name:"zise_id",eRef:l,dropdownParent:"#item-variants-form",children:[e.jsx("option",{value:"",children:"Seleccionar"}),I.map(i=>e.jsx("option",{value:i.id,children:i.name},i.id))]})}),e.jsx("div",{className:"col-md-2",children:e.jsx(S,{label:"Stock",name:"stock",eRef:R,type:"number",min:0,required:!0})}),e.jsx("div",{className:"col-md-1",children:e.jsx(S,{label:"Min. Stock",name:"min_stock",eRef:y,type:"number",min:0})}),e.jsx("div",{className:"col-md-2",children:e.jsx(S,{label:"Precio",name:"price",eRef:w,type:"number",step:"0.01"})}),e.jsx("div",{className:"col-md-1",children:e.jsx(S,{label:"Descuento",name:"discount",eRef:N,type:"number",step:"0.01"})}),e.jsxs("div",{className:"col-md-2 d-flex align-items-center",children:[e.jsx("button",{className:"btn btn-primary me-1",type:"button",onClick:G,children:d!==null?"Actualizar":"Agregar"}),d!==null&&e.jsx("button",{className:"btn btn-light",type:"button",onClick:z,children:"Cancelar"})]})]}),e.jsx("hr",{}),e.jsxs("table",{className:"table table-bordered table-sm mt-2",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Color"}),e.jsx("th",{children:"Talla"}),e.jsx("th",{children:"Stock"}),e.jsx("th",{children:"Min. Stock"}),e.jsx("th",{children:"Precio"}),e.jsx("th",{children:"Descuento"}),e.jsx("th",{children:"Final"}),e.jsx("th",{children:"Acciones"})]})}),e.jsx("tbody",{children:h.map((i,c)=>{var D,k;return e.jsxs("tr",{children:[e.jsx("td",{children:((D=i.color)==null?void 0:D.name)||"-"}),e.jsx("td",{children:((k=i.zise)==null?void 0:k.name)||"-"}),e.jsx("td",{children:i.stock}),e.jsx("td",{children:i.min_stock}),e.jsx("td",{children:i.price}),e.jsx("td",{children:i.discount}),e.jsx("td",{children:i.final_price}),e.jsxs("td",{children:[e.jsx("button",{className:"btn btn-xs btn-soft-primary me-1",title:"Editar",onClick:()=>U(c),children:e.jsx("i",{className:"fa fa-pen"})}),e.jsx("button",{className:"btn btn-xs btn-soft-danger",title:"Eliminar",onClick:()=>B(i.id),children:e.jsx("i",{className:"fa fa-trash"})})]})]},i.id)})})]})]})},Be=({show:o,onClose:f,itemId:I,colors:h,sizes:x})=>e.jsxs($e,{isOpen:o,onRequestClose:f,contentLabel:"Gestionar Variantes",ariaHideApp:!1,style:{overlay:{zIndex:2e3,background:"rgba(0,0,0,0.4)"},content:{maxWidth:1200,margin:"auto",borderRadius:8}},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h4",{className:"modal-title",children:"Gestionar Variantes"}),e.jsx("button",{type:"button",className:"btn-close",onClick:f})]}),e.jsx("div",{className:"modal-body",children:e.jsx(ze,{itemId:I,colors:h,sizes:x})})]}),Q=new Se,Ge=({categories:o,brands:f})=>{const[I,h]=n.useState([]),[x,A]=n.useState([]),[m,d]=n.useState([]),[v,j]=n.useState(!1),l=n.useRef(),R=n.useRef(),y=n.useRef(),w=n.useRef(),N=n.useRef(),P=n.useRef(),U=n.useRef(),z=n.useRef(),C=n.useRef(),B=n.useRef(),G=n.useRef(),i=n.useRef(),c=n.useRef(),D=n.useRef(),k=n.useRef(),J=n.useRef(),T=n.useRef(),[M,O]=n.useState(!1),[se,Y]=n.useState(null),[de,X]=n.useState(null),[g,_]=n.useState([]),Z=n.useRef(),me=t=>{const s=Array.from(t.target.files).map(a=>({file:a,url:URL.createObjectURL(a)}));_(a=>[...a,...s])},pe=t=>{t.preventDefault();const s=Array.from(t.dataTransfer.files).map(a=>({file:a,url:URL.createObjectURL(a)}));_(a=>[...a,...s])},fe=t=>{t.preventDefault()},he=(t,r)=>{t.preventDefault(),g[r].id?_(a=>a.map((E,F)=>F===r?{...E,toDelete:!0}:E)):_(a=>a.filter((E,F)=>F!==r))};n.useEffect(()=>{if(m&&m.images){const t=m.images.map(r=>({id:r.id,url:`/api/items/media/${r.url}`}));_(t)}},[m]);const[V,ee]=n.useState(null),le=t=>{if(d(t||null),t!=null&&t.id?O(!0):O(!1),y.current.value=(t==null?void 0:t.id)||"",$(w.current).val((t==null?void 0:t.category_id)||null).trigger("change"),N.current.value=(t==null?void 0:t.name)||"",P.current.value=(t==null?void 0:t.alias)||"",U.current.value=(t==null?void 0:t.summary)||"",z.current.value=(t==null?void 0:t.price)||0,C.current.value=(t==null?void 0:t.discount)||0,$(D.current).val((t==null?void 0:t.score)||null).trigger("change"),B.current.value=null,B.image.src=`/api/items/media/${(t==null?void 0:t.image)??"undefined"}`,G.current.value=null,G.image.src=`/api/items/media/${(t==null?void 0:t.banner)??"undefined"}`,i.current.value=null,t!=null&&t.manual?ee(`/storage/images/item/${t.manual}`):ee(null),c.current.value=(t==null?void 0:t.description)??"",t!=null&&t.images){const r=t.images.map(s=>({id:s.id,url:`/api/items/media/${s.url}`}));_(r)}else _([]);k.current.value=t==null?void 0:t.stock,J.current.value=t==null?void 0:t.min_stock,Ie(T.current,(t==null?void 0:t.pack_items)??[],"id","name"),$(R.current).modal("show")},xe=async t=>{t.preventDefault();let r=0,s=0;C.current.value&&C.current.value>0?(r=C.current.value,s=100-C.current.value*100/z.current.value):(r=z.current.value,s=0);const E=($(T.current).val()||[]).map(u=>{const re=$(T.current).find(`option[value="${u}"]`);return{id:parseInt(u),name:re.text()}}),F={id:y.current.value||void 0,category_id:w.current.value,name:N.current.value,alias:P.current.value,summary:U.current.value,price:z.current.value,discount:C.current.value,description:c.current.value,stock:k.current.value,min_stock:J.current.value,score:D.current.value,final_price:r,discount_percent:s,pack_items:E.length>0?E:[]},b=new FormData;for(const u in F)u==="pack_items"?b.append(u,JSON.stringify(F[u])):b.append(u,F[u]);const H=B.current.files[0];H&&b.append("image",H);const K=G.current.files[0];K&&b.append("banner",K);const p=i.current.files[0];p&&V&&b.append("manual",p),g.forEach((u,re)=>{u.toDelete||(u.file?b.append(`gallery[${re}]`,u.file):b.append(`gallery_ids[${re}]`,u.id))});const q=g.filter(u=>u.toDelete).map(u=>parseInt(u.id,10));q.length>0&&b.append("deleted_images",JSON.stringify(q)),await Q.save(b)&&($(l.current).dxDataGrid("instance").refresh(),$(R.current).modal("hide"),_([]))},ge=async({id:t,value:r})=>{await Q.boolean({id:t,field:"visible",value:r})&&$(l.current).dxDataGrid("instance").refresh()},te=async({id:t,field:r,value:s})=>{await Q.boolean({id:t,field:r,value:s})&&$(l.current).dxDataGrid("instance").refresh()},be=async t=>{const{isConfirmed:r}=await ue.fire({title:"Eliminar Item",text:"¿Estás seguro de eliminar este item?",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"});!r||!await Q.delete(t)||$(l.current).dxDataGrid("instance").refresh()},ve=[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"},{value:5,label:"5"}],je=t=>{const r=t.target.files[0];r&&ee(URL.createObjectURL(r))},Re=()=>{ee(null)},ye=()=>{j(!1)},we=async t=>{var b,H,K;const r=new Pe,s=new Te;r.list({item_id:t}).then(p=>{h(p.data||[])}),s.list({item_id:t}).then(p=>{A(p.data||[]),console.log(p.data)});let a=null;if(l.current&&typeof((H=(b=l.current.current)==null?void 0:b.instance)==null?void 0:H.getDataSource)=="function"){const p=l.current.current.instance.getDataSource().items;Array.isArray(p)&&(a=p.find(q=>q.id===t))}else if(l.current&&typeof((K=l.current.instance)==null?void 0:K.getDataSource)=="function"){const p=l.current.instance.getDataSource().items;Array.isArray(p)&&(a=p.find(q=>q.id===t))}a||(a={id:t});const[E,F]=await Promise.all([r.list({item_id:t}),s.list({item_id:t})]);h(E.data||[]),A(F.data||[]),d(a),O(!1),j(!0)};return e.jsxs(e.Fragment,{children:[e.jsx(Ae,{gridRef:l,title:"Items",rest:Q,toolBar:t=>{t.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(l.current).dxDataGrid("instance").refresh()}}),t.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Agregar",hint:"Agregar",onClick:()=>le()}})},exportable:!0,exportableName:"Items",columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"category.name",caption:"Categoría",width:"180px",cellTemplate:(t,{data:r})=>{var s,a;t.html(ie(e.jsxs(e.Fragment,{children:[e.jsx("b",{className:"d-block",children:(s=r.category)==null?void 0:s.name}),e.jsx("small",{className:"text-muted",children:(a=r.subcategory)==null?void 0:a.name})]})))}},{dataField:"category.name",caption:"Categoria",visible:!1},{dataField:"name",caption:"Nombre",width:"300px",cellTemplate:(t,{data:r})=>{t.html(ie(e.jsxs(e.Fragment,{children:[e.jsx("b",{children:r.name}),e.jsx("br",{}),e.jsx("span",{className:"truncate",children:r.summary})]})))}},{dataField:"final_price",caption:"Precio",dataType:"number",width:"75px",cellTemplate:(t,{data:r})=>{t.html(ie(e.jsxs(e.Fragment,{children:[r.discount>0&&e.jsxs("small",{className:"d-block text-muted",style:{textDecoration:"line-through"},children:["S/.",oe(r.price)]}),e.jsxs("span",{children:["S/.",oe(r.discount>0?r.discount:r.price)]})]})))}},{dataField:"image",caption:"Imagen",width:"90px",allowFiltering:!1,cellTemplate:(t,{data:r})=>{L(t,e.jsx("img",{src:`/api/items/media/${r.image}`,style:{width:"80px",height:"48px",objectFit:"cover",objectPosition:"center",borderRadius:"4px"},onError:s=>s.target.src="/api/cover/thumbnail/null"}))}},{dataField:"is_new",caption:"Nuevo",dataType:"boolean",width:"80px",cellTemplate:(t,{data:r})=>{L(t,e.jsx(W,{checked:r.is_new,onChange:s=>te({id:r.id,field:"is_new",value:s.target.checked})}))}},{dataField:"offering",caption:"En oferta",dataType:"boolean",width:"80px",cellTemplate:(t,{data:r})=>{L(t,e.jsx(W,{checked:r.offering,onChange:s=>te({id:r.id,field:"offering",value:s.target.checked})}))}},{dataField:"recommended",caption:"Recomendado",dataType:"boolean",width:"80px",cellTemplate:(t,{data:r})=>{L(t,e.jsx(W,{checked:r.recommended,onChange:s=>te({id:r.id,field:"recommended",value:s.target.checked})}))}},{dataField:"featured",caption:"Destacado",dataType:"boolean",width:"80px",cellTemplate:(t,{data:r})=>{L(t,e.jsx(W,{checked:r.featured,onChange:s=>te({id:r.id,field:"featured",value:s.target.checked})}))}},{dataField:"visible",caption:"Visible",dataType:"boolean",width:"80px",cellTemplate:(t,{data:r})=>{L(t,e.jsx(W,{checked:r.visible,onChange:s=>ge({id:r.id,value:s.target.checked})}))}},{caption:"Acciones",width:"150px",cellTemplate:(t,{data:r})=>{t.css("text-overflow","unset"),t.append(ae({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>le(r)})),t.append(ae({className:"btn btn-xs btn-soft-secondary",title:"Variantes",icon:"fa fa-layer-group",onClick:()=>we(r.id)})),t.append(ae({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>be(r.id)}))},allowFiltering:!1,allowExporting:!1}]}),e.jsxs(Ce,{modalRef:R,title:M?"Editar Item":"Agregar Item",onSubmit:xe,size:"xl",children:[e.jsxs("div",{className:"row",id:"principal-container",children:[e.jsx("input",{ref:y,type:"hidden"}),e.jsxs("div",{className:"col-md-6",children:[e.jsx(S,{eRef:N,label:"Nombre",required:!0}),e.jsx(S,{eRef:P,label:"Alias del producto"}),e.jsx(S,{eRef:U,label:"Resumen"}),e.jsx(ne,{eRef:w,label:"Categoría",required:!0,dropdownParent:"#principal-container",onChange:t=>Y(t.target.value),children:o.map((t,r)=>e.jsx("option",{value:t.id,children:t.name},r))}),e.jsx(S,{label:"Stock mínimo",eRef:J,type:"number"}),e.jsx(S,{label:"Stock",eRef:k,type:"number"}),e.jsx(S,{eRef:z,label:"Precio",type:"number",step:"0.01",required:!0}),e.jsx(S,{eRef:C,label:"Descuento",type:"number",step:"0.01"}),e.jsx(ne,{eRef:D,label:"Calificación",required:!0,dropdownParent:"#principal-container",onChange:t=>X(t.target.value),children:ve.map((t,r)=>e.jsx("option",{value:t.value,children:t.label},r))})]}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"row",children:[e.jsx(ce,{eRef:B,label:"Imagen",aspect:1,col:"col-lg-4 col-md-4 col-sm-12"}),e.jsx(ce,{eRef:G,label:"Imagen del producto",aspect:1,col:"col-lg-4 col-md-4 col-sm-12"}),e.jsxs("div",{className:"col-lg-4 col-md-4 col-sm-12",children:[e.jsx("label",{className:"form-label",children:"Galeria"}),e.jsx("input",{id:"input-item-gallery",ref:Z,type:"file",multiple:!0,accept:"image/*",hidden:!0,onChange:me}),e.jsx("div",{style:{border:"2px dashed #ccc",padding:"20px",textAlign:"center",cursor:"pointer",borderRadius:"4px",boxShadow:"2.5px 2.5px 5px rgba(0,0,0,.125)",aspectRatio:"21/9",height:"160px",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>Z.current.click(),onDrop:pe,onDragOver:fe,children:e.jsx("span",{className:"form-label d-block mb-1",children:"Arrastra y suelta imágenes aquí o haz clic para agregar"})})]}),e.jsx("div",{className:"col-md-12 col-sm-12",children:e.jsx("div",{className:"d-flex flex-wrap gap-1  mt-2",children:g.map((t,r)=>e.jsxs("div",{className:"position-relative",style:{width:"80px",height:"80px"},children:[e.jsx("img",{src:`${t.url}`,alt:"preview",style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"4px"}}),e.jsx("button",{className:"btn btn-xs btn-danger position-absolute",style:{top:0,right:0},onClick:s=>he(s,r),children:"×"})]},r))})}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Manual PDF"}),e.jsxs("div",{className:"input-group mb-2",children:[e.jsx("input",{type:"file",className:"form-control",ref:i,accept:".pdf",onChange:je}),V&&e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-danger",onClick:Re,children:e.jsx("i",{className:"fa fa-trash"})})})]}),V&&e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"d-flex align-items-center mb-2",children:e.jsxs("a",{href:V,target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-soft-primary mr-2",children:[e.jsx("i",{className:"fa fa-file-pdf mr-1"}),"Ver PDF"]})}),e.jsx("div",{className:"border rounded",children:e.jsx("iframe",{src:`${V}#toolbar=0`,type:"application/pdf",width:"100%",height:"400px",children:e.jsxs("p",{children:["Tu navegador no puede mostrar el PDF directamente.",e.jsx("a",{href:V,target:"_blank",rel:"noopener noreferrer",children:"Haz clic aquí para descargarlo"})]})})})]})]})]})})]}),e.jsx("hr",{className:"my-1"}),e.jsx("label",{className:"form-label",children:"Descripción"}),e.jsx("textarea",{ref:c,className:"form-control",placeholder:"Descripción"}),e.jsx("hr",{className:"my-1"}),e.jsx("label",{className:"form-label",children:"Pack de Productos"}),e.jsx("p",{className:"text-muted small",children:"Selecciona los productos que formarán parte de este pack. Si no seleccionas ninguno, se tratará como un producto individual."}),e.jsx(_e,{eRef:T,label:"Productos del Pack",searchAPI:"/api/admin/items/paginate",searchBy:"name",multiple:!0,dropdownParent:"#principal-container",templateResult:t=>{var r,s,a;return t.id?$(`
                            <div class="d-flex align-items-center">
                                <img src="/api/items/media/${((r=t.data)==null?void 0:r.image)||"undefined"}" 
                                     style="width: 32px; height: 32px; object-fit: cover; border-radius: 4px; margin-right: 8px;" 
                                     onerror="this.src='/api/items/media/undefined'" />
                                <div>
                                    <div style="font-weight: 500;">${t.text}</div>
                                    <small class="text-muted">SKU: ${((s=t.data)==null?void 0:s.sku)||"N/A"} | Stock: ${((a=t.data)==null?void 0:a.stock)||0}</small>
                                </div>
                            </div>
                        `):t.text},templateSelection:t=>(t.id,t.text)}),v&&e.jsx(Be,{show:v,onClose:ye,itemId:m==null?void 0:m.id,colors:I,sizes:x})]})]})};Fe((o,f)=>{ke(o).render(e.jsx(Ne,{...f,title:"Items",children:e.jsx(Ge,{...f})}))});
