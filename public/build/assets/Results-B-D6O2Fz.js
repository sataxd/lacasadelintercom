var p=Object.defineProperty;var h=(i,t,o)=>t in i?p(i,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[t]=o;var a=(i,t,o)=>(h(i,typeof t!="symbol"?t+"":t,o),o);import"./AboutHeader-CpM0iYLI.js";import"./index-B80Lgev0.js";import{m as r}from"./main-Br9xqDfn.js";import"./___vite-browser-external_commonjs-proxy-C9-083JZ.js";let c=new AbortController;class l{constructor(){a(this,"path",null);a(this,"hasFiles",!1);a(this,"paginate",async t=>{c.abort("Nothing"),c=new AbortController;const o=c.signal;return await(await fetch(`/api/${this.path}/paginate`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(r.Cookies.get("XSRF-TOKEN"))},body:JSON.stringify(t),signal:o})).json()});a(this,"save",async(t,o=()=>{})=>{try{let e=!1,s={};if(this.hasFiles){const n=await fetch(`/api/${this.path}`,{method:"POST",headers:{"X-Xsrf-Token":decodeURIComponent(r.Cookies.get("XSRF-TOKEN"))},body:t});e=n.ok,s=JSON.parseable(await n.text())}else{const n=await r.Fetch(`/api/${this.path}`,{method:"POST",body:JSON.stringify(t)});e=n.status,s=n.result}if(!e)throw new Error((s==null?void 0:s.message)||"Ocurrio un error inesperado");return o==null||o(),console.log(s),s}catch(e){return r.Notify.add({icon:"/assets/img/icon.png",title:"Error",body:e.message,type:"danger"}),null}});a(this,"status",async({id:t,status:o})=>{try{const{status:e,result:s}=await r.Fetch(`/api/${this.path}/status`,{method:"PATCH",body:JSON.stringify({id:t,status:o})});if(!e)throw new Error((s==null?void 0:s.message)??"Ocurrio un error inesperado");return r.Notify.add({icon:"/assets/img/icon.png",title:"Correcto",body:s.message,type:"success"}),!0}catch(e){return r.Notify.add({icon:"/assets/img/icon.png",title:"Error",body:e.message,type:"danger"}),!1}});a(this,"boolean",async({id:t,field:o,value:e})=>{try{const{status:s,result:n}=await r.Fetch(`/api/${this.path}/boolean`,{method:"PATCH",body:JSON.stringify({id:t,field:o,value:e})});if(!s)throw new Error((n==null?void 0:n.message)??"Ocurrio un error inesperado");return r.Notify.add({icon:"/assets/img/icon.png",title:"Correcto",body:n.message,type:"success"}),!0}catch(s){return r.Notify.add({icon:"/assets/img/icon.png",title:"Error",body:s.message,type:"danger"}),!1}});a(this,"delete",async t=>{try{const{status:o,result:e}=await r.Fetch(`/api/${this.path}/${t}`,{method:"DELETE"});if(!o)throw new Error((e==null?void 0:e.message)??"Ocurrio un error inesperado");return r.Notify.add({icon:"/assets/img/icon.png",title:"Correcto",body:e.message,type:"success"}),!0}catch(o){return r.Notify.add({icon:"/assets/img/icon.png",title:"Error",body:o.message,type:"danger"}),!1}});a(this,"get",async(t={},o=[])=>{try{let e=`/api/${this.path}`;if(typeof t=="string"||typeof t=="number")e+=`/${t}`;else if(typeof t=="object"&&Object.keys(t).length>0){const n=new URLSearchParams(t).toString();e+=`?${n}`}if(o.length>0){const n=o.join(",");e+=`${e.includes("?")?"&":"?"}with=${n}`}const s=await fetch(e,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(r.Cookies.get("XSRF-TOKEN"))}});if(!s.ok)throw new Error(`Error ${s.status}: ${s.statusText}`);return await s.json()}catch(e){return r.Notify.add({icon:"/assets/img/icon.png",title:"Error",body:e.message,type:"danger"}),null}})}}export{l as B};
