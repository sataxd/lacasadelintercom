var he=Object.defineProperty;var ue=(m,d,r)=>d in m?he(m,d,{enumerable:!0,configurable:!0,writable:!0,value:r}):m[d]=r;var g=(m,d,r)=>(ue(m,typeof d!="symbol"?d+"":d,r),r);import{j as e}from"./AboutHeader-CpM0iYLI.js";import{r as i}from"./index-B80Lgev0.js";import{a as ee}from"./Detail-C1EkQ00-.js";import{m as $}from"./main-Br9xqDfn.js";import{B as ge}from"./Results-B-D6O2Fz.js";class pe extends ge{constructor(){super(...arguments);g(this,"path","generals");g(this,"getSocials",async()=>{try{const{status:r,result:l}=await $.Fetch(`/api/${this.path}/get-socials`,{method:"GET"});if(!r)throw new Error((l==null?void 0:l.message)??"Ocurrió un error al consultar");return(l==null?void 0:l.data)??[]}catch(r){return console.error("Error en getSocials:",r),[]}});g(this,"getBenefits",async()=>{try{const{status:r,result:l}=await $.Fetch(`/api/${this.path}/get-benefits`,{method:"GET"});if(!r)throw new Error((l==null?void 0:l.message)??"Ocurrió un error al consultar");return(l==null?void 0:l.data)??[]}catch(r){return console.log("Error en getSocials:",r),[]}});g(this,"getAboutuses",async()=>{try{const{status:r,result:l}=await $.Fetch(`/api/${this.path}/get-aboutuses`,{method:"GET"});if(!r)throw new Error((l==null?void 0:l.message)??"Ocurrió un error al consultar");return(l==null?void 0:l.data)??[]}catch(r){return console.error("Error en getAboutuses:",r),[]}})}}const je=new pe,Se=({session:m,showSlogan:d=!0,gradientStart:r,menuGradientEnd:l,backgroundType:u="none",backgroundSrc:O="",backgroundHeight:te="h-full",backgroundPosition:R="object-top",children:T})=>{const[y,k]=i.useState(!1),_=i.useRef(null),S=i.useRef(null),{incrementarCantidad:se,decrementarCantidad:ae}=i.useContext(ee),le=t=>{t.target.closest(".menu-toggle")?k(!y):k(!1)};i.useEffect(()=>{const t=s=>{S.current==s.target||S.current.contains(s.target)||_.current&&!_.current.contains(s.target)&&k(!1)};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[]);const[C,re]=i.useState(!1);i.useEffect(()=>{const t=()=>{re(window.scrollY>1)};return window.addEventListener("scroll",t),()=>window.removeEventListener("scroll",t)},[]);const{carrito:f,eliminarProducto:ie,agregarAlCarrito:oe}=i.useContext(ee),[z,E]=i.useState({}),ce=(t,s)=>{z[t]||E(a=>{var o,n;return{...a,[t]:{selectedColor:((o=s==null?void 0:s.colors)==null?void 0:o.length)>0?s.colors[0].name:"",selectedSize:((n=s==null?void 0:s.sizes)==null?void 0:n.length)>0?s.sizes[0].name:""}}})},ne=(t,s)=>{E(a=>({...a,[t]:{...a[t],selectedColor:s}}))},de=(t,s)=>{E(a=>({...a,[t]:{...a[t],selectedSize:s}}))};let F=[];for(const t of f)if(t.ad&&t.ad.banner_image&&t.ad.offer_item){const s=t.ad.offer_item.id,a=f.some(n=>n.id===s),o=localStorage.getItem(`ad_shown_${t.id}`)==="true";if(!a&&!o){let n=!1;t.ad.offer_item.variants&&t.ad.offer_item.variants.length>0?n=t.ad.offer_item.variants.some(N=>N.stock>0):n=(t.ad.offer_item.stock||0)>0,n&&F.push({...t.ad,originalProductId:t.id})}}const[we,P]=i.useState(!1),L=f.reduce((t,s)=>s.variations&&s.variations.length>0?t+s.variations.reduce((a,o)=>a+o.quantity,0):t+s.quantity,0);i.useEffect(()=>{L>0&&(P(!0),setTimeout(()=>P(!1),500))},[L]);const[xe,me]=i.useState(!1),q=f.reduce((t,s)=>s.variations&&s.variations.length>0?t+s.variations.reduce((a,o)=>a+(o.final_price||s.final_price||0)*o.quantity,0):t+(s.final_price||0)*s.quantity,0),[p,fe]=i.useState([]);i.useEffect(()=>{(async()=>{try{const s=await je.getSocials();fe(s)}catch(s){console.error("Error fetching socials:",s)}})()},[]);const j=p.find(t=>t.description==="TikTok"),w=p.find(t=>t.description==="WhatsApp"),b=p.find(t=>t.description==="Instagram"),v=p.find(t=>t.description==="Facebook");return e.jsx(e.Fragment,{children:e.jsxs("div",{className:`w-full max-w-full relative ${te} overflow-clip `,children:[u==="image"&&e.jsx("img",{src:O,className:`absolute -z-10 inset-0 w-screen h-full  object-cover ${R}`,alt:"Background"}),u==="video"&&e.jsx("video",{className:`absolute -z-10 inset-0  w-screen h-full  object-cover ${R}`,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,preload:"auto",disablePictureInPicture:!0,disableRemotePlayback:!0,"webkit-playsinline":"true",children:e.jsx("source",{src:O,type:"video/mp4"})}),(u==="image"||u==="video")&&e.jsx("div",{className:"absolute inset-0 ",style:{background:"linear-gradient(180deg, rgba(20,20,20,1) 0%, rgba(0,0,0,0.1) 100%)"}}),e.jsxs("header",{className:`font-sora fixed lg:w-full top-0 overflow-hidden z-40 transition-colors duration-300 ${u==="none"?"bg-[#0b0b0b]":C?"bg-[#0b0b0b] shadow-md shadow-gray-800 transition-all duration-150":"bg-transparent"} ${C&&"bg-[#0b0b0b] transition-all duration-150"}`,children:[e.jsxs("div",{className:"px-[5%] w-screen py-5 lg:py-0 flex justify-between items-center text-white shadow-lg lg:shadow-none ",children:[e.jsxs("div",{className:"flex flex-row gap-6 justify-between items-center w-full lg:hidden",children:[e.jsx("button",{ref:S,onClick:le,className:"text-white menu-toggle","aria-label":"Toggle menu",children:e.jsx("i",{className:`fas ${y?"fa-times":"fa-bars"} text-lg md:text-2xl`})}),e.jsx("a",{href:"/",children:e.jsx("img",{src:"/assets/img/lacasadelintercom_white.webp",alt:"WeFem Logo",className:"h-[40px] object-cover -mt-2"})}),e.jsxs("div",{className:"flex flex-row space-x-4 text-2xl items-end justify-end",children:[b&&e.jsx("a",{href:b.link,target:"_blank",className:"flex justify-center items-center",children:e.jsx("i",{className:"fa-brands fa-instagram"})}),v&&e.jsx("a",{href:v.link,target:"_blank",className:"flex justify-center items-center",children:e.jsx("i",{className:"fa-brands fa-facebook"})}),j&&e.jsx("a",{href:j.link,target:"_blank",children:e.jsx("i",{className:"fa-brands fa-tiktok"})})]})]}),e.jsxs("div",{className:"hidden lg:flex lg:flex-row py-5 w-full justify-between items-center font-normal text-base",children:[e.jsx("a",{href:"/",className:"flex justify-start xl:w-3/12",children:e.jsx("img",{src:"/assets/img/lacasadelintercom_white.webp",alt:"La casa del intercomunicador",className:"h-[43px] 4xl:h-[50px] object-cover -mt-2"})}),e.jsxs("nav",{className:"flex flex-row justify-center gap-5 xl:gap-8 4xl:gap-10 xl:w-7/12 font-dmsans font-normal lg:text-lg 2xl:text-xl 4xl:text-[23px] text-center tracking-normal",children:[e.jsx("a",{href:"/catalog",children:"Inicio"}),e.jsx("a",{href:"/instructions",children:"Productos"}),e.jsx("a",{href:"/about",children:"Servicio Técnico"}),e.jsx("a",{href:"/quiz",children:"Contacto"}),e.jsx("a",{href:"/quiz",children:"Únete"})]}),e.jsxs("div",{className:"flex flex-row space-x-6 text-2xl 4xl:text-4xl items-end justify-end xl:w-3/12",children:[w&&e.jsx("a",{href:w.link,target:"_blank",className:"flex justify-center items-center cursor-pointer",children:e.jsx("i",{className:"fa-brands fa-whatsapp"})}),b&&e.jsx("a",{href:b.link,target:"_blank",className:"flex justify-center items-center",children:e.jsx("i",{className:"fa-brands fa-instagram"})}),v&&e.jsx("a",{href:v.link,target:"_blank",className:"flex justify-center items-center",children:e.jsx("i",{className:"fa-brands fa-facebook"})}),j&&e.jsx("a",{href:j.link,target:"_blank",children:e.jsx("i",{className:"fa-brands fa-tiktok"})})]})]})]}),w&&e.jsx("div",{className:"flex justify-end w-full mx-auto z-[100] relative  ",children:e.jsx("div",{className:"fixed bottom-3 right-2 md:bottom-[1rem] lg:bottom-[2rem] lg:right-3 z-20 cursor-pointer",children:e.jsx("a",{target:"_blank",id:"whatsapp-toggle",href:w.link,children:e.jsx("img",{src:"/assets/img/whatsapp.svg",alt:"whatsapp",className:"mr-3 w-16 h-16 md:w-[80px] md:h-[80px]  animate-bounce duration-300"})})})})]}),e.jsx("div",{ref:_,className:`fixed md:top-20 inset-0 text-white z-[999] transform ${y?"opacity-1 block ":"hidden opacity-0 "} ${C?"top-[3.75rem] bg-[#5339B1]":"top-24 bg-[#5339B1]"} transition-transform duration-300 ease-in-out p-[5%] h-max overflow-y-auto `,children:e.jsxs("ul",{className:"flex flex-col gap-4 items-center justify-center",children:[e.jsx("li",{children:e.jsx("a",{href:"/catalog",children:"Tienda"})}),e.jsx("li",{children:e.jsx("a",{href:"/instructions",children:"¿Cómo usar?"})}),e.jsx("li",{children:e.jsx("a",{href:"/about",children:"Nosotrxs"})}),e.jsx("li",{children:e.jsx("a",{href:"/quiz",children:"Quiz telefono"})})]})}),T&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-center text-white p-6",children:T}),xe&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-start justify-end px-[5%] lg:px-0 pt-12 pb-12 overflow-y-auto z-50 scrollbar-hide",children:e.jsxs("div",{className:"bg-[#EFE5FF] shadow-lg w-full sm:max-w-[380px] lg:max-w-[500px]  h-max    p-8 lg:p-14 rounded-[30px]  lg:rounded-[50px] ",children:[e.jsxs("div",{className:"flex justify-between items-center  ",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Tu Carrito"}),e.jsx("button",{onClick:()=>me(!1),className:"text-lg font-bold text-[#5F48B7]",children:"✖"})]}),e.jsxs("div",{className:"bg-[#9C79D4] py-2 text-lg mt-4 mb-8 text-center rounded-[14px]  lg:rounded-[20px]  text-white",children:["¡Tienes envío gratis en LIMA!"," ",e.jsx("img",{src:"/assets/img/emojis/motor-scooter.png",className:"h-[16.88px] lg:h-[26.88px] inline-flex ml-2"})," "]}),e.jsx("div",{className:"flex-1  gap-4",children:f.length===0?e.jsxs("div",{className:"w-full flex flex-col items-center justify-center gap-5 text-3xl h-max my-5",children:[e.jsx("img",{src:"/assets/img/logo.png",alt:"Wefem",className:"h-[58px] w-[330.55px] object-cover object-top",style:{textShadow:"0px 4px 7.5px 0px #00000040"}}),e.jsx("p",{className:"text-center text-gray-500 ",children:"Tu carrito está vacío"})]}):f.map((t,s)=>e.jsxs("div",{className:"flex items-center gap-4  mb-4 w-full",children:[e.jsx("img",{src:`/api/items/media/${t.image}`,alt:t.name,onError:a=>a.target.src="/api/cover/thumbnail/null",className:"w-20 h-20 md:w-28 md:h-28  object-cover"}),e.jsxs("div",{className:" flex flex-col w-[calc(100%-5rem)] md:w-[calc(100%-7rem)] ",children:[e.jsxs("div",{className:"w-full flex",children:[e.jsxs("div",{className:"w-5/6 lg:w-8/12",children:[e.jsx("h3",{className:"text-xl  font-normal  md:leading-[25.78px] ",children:t.name}),t.summary&&e.jsxs("p",{className:"text-[10px] md:text-xs    font-light inline-flex truncate",children:["(",t.summary,")"]}),t.discount&&e.jsxs("p",{className:"w-11/12 md:w-full h-[18.55px]   md:h-[25.55px]    bg-[#212529]  text-white rounded-[5.44px] my-1 flex items-center justify-center text-[8.65px] md:text-[9.65px]  font-semibold   leading-[21.75px]",children:[e.jsx("span",{className:"font-medium md:font-bold text-[7.65px] md:text-[9.65px]  mr-2 ",children:"ESTAS AHORRANDO"})," ","S/"," ",Number(t.price-t.discount).toFixed(0)," ",e.jsx("img",{src:"/assets/img/emojis/fire.png",className:"h-[9.88px]  inline-flex ml-2"})]})]}),e.jsx("div",{className:"w-1/6 lg:w-4/12 flex items-start justify-end",children:e.jsx("button",{className:"group text-white px-2 py-1 rounded-md hover:fill-red-500 transition-all duration-300",onClick:()=>ie(t.id),children:e.jsx("div",{className:"h-10 lg:h-12 scale-x-[-1] ",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",className:"h-full w-4 lg:w-5 relative",fill:"current",children:[e.jsx("path",{className:"group-hover:-rotate-12 group-hover:absolute group-hover:inset-0 ",fill:"current",d:"M135.2 17.7C140.6 6.8 151.7 0 163.8 0L284.2 0c12.1 0 23.2 6.8 28.6 17.7L320 32l96 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 96C14.3 96 0 81.7 0 64S14.3 32 32 32l96 0 7.2-14.3z"}),e.jsx("path",{fill:"current",d:"M32 128l384 0 0 320c0 35.3-28.7 64-64 64L96 512c-35.3 0-64-28.7-64-64l0-320zm96 64c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16s16-7.2 16-16l0-224c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16s16-7.2 16-16l0-224c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16s16-7.2 16-16l0-224c0-8.8-7.2-16-16-16z"})]})})})})]}),e.jsxs("div",{className:"w-full flex",children:[e.jsx("div",{className:"w-1/2  md:w-4/6 lg:w-1/2  flex  ",children:e.jsxs("p",{className:"text-xl  items-center   font-bold text-[#5F48B7] ",children:["S/"," ",Number(t.final_price||0).toFixed(2)]})}),e.jsx("div",{className:"w-1/2  md:w-2/6 lg:w-1/2 h-8 ",children:e.jsxs("div",{className:" flex h-full text-[#000000]  bg-transparent border border-black items-center justify-around  rounded-[8px]  md:rounded-[10px] ",children:[e.jsx("button",{className:"w-6 h-6 text-xs md:text-base  ",onClick:()=>ae(t.id),children:"-"}),e.jsx("span",{className:"h-full flex items-center text-xs md:text-base  font-medium",children:t.variations&&t.variations.length>0?t.variations.reduce((a,o)=>a+o.quantity,0):t.quantity}),e.jsx("button",{className:"w-6 h-6 text-xs md:text-base   ",onClick:()=>se(t.id),children:"+"})]})})]})]})]},s))}),F.length>0&&e.jsx("div",{className:"my-4 flex flex-col items-center gap-6",children:F.map((t,s)=>{var n,N,B,G,M,H,W,D,I,Y,Q,V;z[t.id]||ce(t.id,t.offer_item);const a=z[t.id]||{selectedColor:((N=(n=t.offer_item)==null?void 0:n.colors)==null?void 0:N.length)>0?t.offer_item.colors[0].name:"",selectedSize:((G=(B=t.offer_item)==null?void 0:B.sizes)==null?void 0:G.length)>0?t.offer_item.sizes[0].name:""},o=((H=(M=t.offer_item)==null?void 0:M.colors)==null?void 0:H.length)>0||((D=(W=t.offer_item)==null?void 0:W.sizes)==null?void 0:D.length)>0;return e.jsxs("div",{className:"w-full flex flex-col items-center",children:[e.jsx("div",{className:"text-start mt-2 text-black font-bold my-2",children:"¡Aprovecha esta oferta exclusiva!"}),o&&e.jsxs("div",{className:"w-full max-w-md p-3 mb-2 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-center mb-2",children:e.jsx("h5",{className:"text-sm font-bold text-gray-700",children:"Selecciona las opciones:"})}),((Y=(I=t.offer_item)==null?void 0:I.colors)==null?void 0:Y.length)>0&&e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xs font-medium",children:"Color:"}),e.jsx("div",{className:"flex gap-1",children:t.offer_item.colors.map((c,h)=>e.jsx("button",{onClick:()=>ne(t.id,c.name),className:`w-6 h-6 rounded-full border-2 ${a.selectedColor===c.name?"border-gray-800":"border-gray-300"}`,style:{backgroundColor:c.summary},title:c.name},h))})]}),((V=(Q=t.offer_item)==null?void 0:Q.sizes)==null?void 0:V.length)>0&&e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium",children:"Talla:"}),e.jsx("select",{value:a.selectedSize,onChange:c=>de(t.id,c.target.value),className:"text-xs px-2 py-1 border border-gray-300 rounded",children:t.offer_item.sizes.map((c,h)=>e.jsxs("option",{value:c.name,children:["Talla ",c.name]},h))})]})]}),e.jsx("img",{src:`/api/ads/media/${t.banner_image}`,alt:"Promo especial",className:"w-full max-w-md rounded-xl shadow-lg cursor-pointer hover:shadow-xl transition-shadow",onClick:async()=>{var h,J;if(!t.offer_item)return;let c=0;if(t.offer_item.variants&&t.offer_item.variants.length>0){const x=t.offer_item.variants.find(K=>{var U,X,Z,A;return(!((U=t.offer_item.colors)!=null&&U.length)||((X=K.color)==null?void 0:X.name)===a.selectedColor)&&(!((Z=t.offer_item.sizes)!=null&&Z.length)||((A=K.size)==null?void 0:A.name)===a.selectedSize)});c=x?x.stock:0}else c=t.offer_item.stock??0;if(c<=0){alert("Sin stock disponible para esta oferta.");return}try{const x=await oe({...t.offer_item,id:t.offer_item.id,quantity:1,price:t.offer_price??t.offer_item.final_price??t.offer_item.price,selectedColor:((h=t.offer_item.colors)==null?void 0:h.length)>0?a.selectedColor:null,selectedSize:((J=t.offer_item.sizes)==null?void 0:J.length)>0?a.selectedSize:null});if(x&&x.success===!1){alert(x.message||"No se pudo agregar la oferta al carrito.");return}t.originalProductId&&localStorage.setItem(`ad_shown_${t.originalProductId}`,"true")}catch(x){console.error("Error al agregar oferta:",x),alert("Error al agregar la oferta. Inténtalo de nuevo.")}}})]},t.id||s)})}),q>0&&e.jsxs("div",{className:"  w-full mt-8",children:[e.jsxs("div",{className:"w-full flex items-center justify-between my-6",children:[e.jsx("p",{className:"text-2xl font-bold text-black ",children:"Subtotal"}),e.jsxs("p",{className:"text-2xl font-bold text-black ",children:["S/ ",q.toFixed(2)]})]}),e.jsx("a",{href:"/checkout",className:" block text-center text-xl w-full  font-semibold rounded-[12.11px] lg:rounded-[15.11px] bg-[#FF9900] text-white py-3 hover:bg-opacity-90 hover:scale-105 transition-all duration-300",children:"IR A COMPRAR"}),e.jsx("div",{className:"mt-6 relative w-full",children:e.jsx("img",{src:"/assets/img/checkout/banner-pagos.png",className:"w-full object-cover h-auto rounded-lg shadow-lg shadow-gray-500/20      "})})]})]})})})]})})};export{pe as G,Se as H};
