import{j as e}from"./AboutHeader-CpM0iYLI.js";import{r as m}from"./index-B80Lgev0.js";import"./main-Br9xqDfn.js";import{C as k,S as E,H as A,a as L,b as F}from"./CouponsRest-DDJuccXv.js";import{C as D,G as P}from"./CreateReactScript-CyT_ENnh.js";import{N as C}from"./Number2Currency-e57Tgsuk.js";import{i as q}from"./tippy-react.esm-CHhA99mn.js";import{C as R}from"./Detail-jhfC8Zww.js";import{B as M}from"./Base-EMiPcBfW.js";import{c as B}from"./ReactAppend-CBRQCQGz.js";import{H as O}from"./Header-CWX2gObH.js";import{c as $}from"./createLucideIcon-Cx5eUsrb.js";import"./___vite-browser-external_commonjs-proxy-C9-083JZ.js";import"./Results-B-D6O2Fz.js";import"./index.esm-Cu-mVv1q.js";/* empty css               *//* empty css              */import"./index-DO3Aws4m.js";import"./proxy-BI9mV89-.js";/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=$("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),c={metropolitana:{name:"Lima Metropolitana",delivery:"Gratis",items:["Ate","Barranco","Breña","Cercado de Lima","Chorrillos","Comas","El Agustino","Independencia","Jesús María","La Molina","La Victoria","Lince","Los Olivos","Magdalena del Mar","Miraflores","Pueblo Libre","Rímac","San Borja","San Isidro","San Juan de Lurigancho","San Juan de Miraflores","San Luis","San Martin de Porres","San Miguel","Santa Anita","Santiago de Surco","Surquillo","Villa el Salvador","Villa Maria del Triunfo"]},alrededores:{name:"Lima Alrededores",delivery:"Por Shalom - Pago en destino",items:["Ancón","Carabayllo","Chaclacayo","Cieneguilla","Lurín","Pachacámac","Pucusana","Puente Piedra","Punta Hermosa","Punta Negra","San Bartolo","Lurigancho (Chosica)","Santa María del Mar","Santa Rosa"]},provincias:{name:"Provincias",delivery:"Por Shalom - Pago en destino",items:""}},I=new F,H=({onPhoneChange:g})=>{const[r,N]=m.useState([]),[d,l]=m.useState(null),[o,x]=m.useState(""),[j,s]=m.useState(!1),h=m.useRef(null);m.useEffect(()=>{(async()=>{try{const b=await(await fetch("/assets/data/countries_phone.json")).json();N(b);const w=b.find(y=>y.iso2==="PE");l(w||b[0])}catch(p){console.error("Error loading countries:",p)}})()},[]),m.useEffect(()=>{const i=p=>{h.current&&!h.current.contains(p.target)&&s(!1)};return document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[]);const u=i=>{const p=i.target.value.replace(/\D/g,"");if(x(p),d){const b=`+${d.phoneCode.replace(/\D/g,"")}${p}`;g(b)}},f=i=>{l(i),s(!1)};return e.jsxs("div",{className:"relative w-full",children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Teléfono/Celular ",e.jsx("b",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex border border-gray-300 rounded-md focus-within:ring-0 focus-within:border-[#C5B8D4]",children:[e.jsxs("div",{className:"relative flex-shrink-0",ref:h,children:[e.jsxs("button",{type:"button",className:`flex items-center justify-between px-3 py-2
                         h-full border-r border-gray-300 bg-gray-50 rounded-l-md 
                         focus:outline-none focus:ring-0`,onClick:()=>s(!j),children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:`fi fi-${d==null?void 0:d.iso2.toLowerCase()} mr-1`}),e.jsxs("span",{className:"text-sm",children:["+",d==null?void 0:d.phoneCode]})]}),e.jsx(z,{className:`h-4 w-4 transition-transform ${j?"rotate-180":""}`})]}),j&&e.jsx("div",{className:"absolute z-10 mt-1 w-full min-w-[280px] bg-white shadow-lg rounded-md py-1 max-h-60 overflow-auto border border-gray-200",children:r.map(i=>e.jsxs("div",{className:"px-3 py-2 hover:bg-gray-100 cursor-pointer flex items-center text-sm",onClick:()=>f(i),children:[e.jsx("span",{className:`fi fi-${i.iso2.toLowerCase()} mr-2`}),e.jsx("span",{className:"flex-1 truncate",children:i.nameES}),e.jsxs("span",{className:"text-gray-500 ml-2",children:["+",i.phoneCode]})]},i.iso2))})]}),e.jsx("input",{type:"tel",value:o,onChange:u,placeholder:"Ej: 987654321",className:`flex-1 w-full min-w-0 px-3 py-2 text-sm 
                    border-0 focus:ring-0 rounded-r-md bg-transparent`,pattern:"[0-9]*",style:{WebkitAppearance:"none"}})]}),o&&d&&e.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Número completo: +",d.phoneCode," ",o]})]})},T=({publicKey:g,session:r})=>{var S;const N=m.useRef(null);Culqi.publicKey=g,Culqi.options({paymentMethods:{tarjeta:!0,yape:!0,billetera:!1,bancaMovil:!1,agente:!1,cuotealo:!1},installments:!0,style:{logo:`${location.origin}/assets/img/icon.png`,bannerColor:"#5339B1"}});const d=JSON.parse(localStorage.getItem("carrito"))||[],[l,o]=m.useState({name:(r==null?void 0:r.name)||null,lastname:(r==null?void 0:r.lastname)||null,email:r==null?void 0:r.email,phone:(r==null?void 0:r.phone)||null,country:"Perú",department:Object.keys(c).find(a=>c[a].name==(r==null?void 0:r.department))||null,province:(r==null?void 0:r.province)||null,district:(r==null?void 0:r.district)||null,zip_code:(r==null?void 0:r.zip_code)||null,address:(r==null?void 0:r.address)||null,number:(r==null?void 0:r.address_number)||null,reference:(r==null?void 0:r.address_reference)||null,comment:null}),[x,j]=m.useState(!1),[s,h]=m.useState(null),u=d.reduce((a,t)=>t.variations&&t.variations.length>0?a+t.variations.reduce((n,v)=>n+t.final_price*v.quantity,0):a+t.final_price*t.quantity,0),f=u*0,i=(u-f)*((s==null?void 0:s.amount)||0)/100,p=()=>{let a="Lima",t="Lima",n=null;return Array.isArray(c[l.department].items)?(a=c[l.department].name,t=l.province,n=null):(a=l.province,t=null,n=l.district),{...l,department:a,province:t,district:n}},b=async a=>{if(a.preventDefault(),x)return;j(!0);let t=null;if(u>0){const n=await k.order({...p(),order_number:Culqi.order_number,renewal_id:"000001",coupon:(s==null?void 0:s.name)??null},d);n&&(t=n.data.id,Culqi.order_number=n.data.order_number)}j(!1),Culqi.settings({title:"WeFem",currency:"PEN",amount:Math.ceil((u-f-i)*100),order:t}),Culqi.open()};window.culqi=async()=>{if(Culqi.token){if(await k.token({order:Culqi.order_number,token:Culqi.token})){const t=Culqi.order_number.replace(`#${P.APP_CORRELATIVE}-`,"");await fetch(`/api/sales/notify/${t}`),location.href="/thanks"}}else Culqi.order&&w()};const w=()=>{setInterval(()=>{if(Culqi.isOpen)return;const a=Culqi.order_number.replace(`#${P.APP_CORRELATIVE}-`,"");fetch(`/api/sales/notify/${a}`).then(t=>{location.href="/"})},500)},y=a=>{a.preventDefault();const t=(N.current.value||"").trim().toUpperCase();t&&I.save({coupon:t,amount:u,email:l==null?void 0:l.email}).then(n=>{h(n?n.data:null)})},_=a=>{a.key=="Enter"&&y(a)};return e.jsxs(e.Fragment,{children:[e.jsx(O,{showSlogan:!0,backgroundHeight:"h-0"}),e.jsx("section",{className:"px-[5%] md:px-[7.5%] lg:px-[10%] pb-[5%] mt-[7.5%] md:mt-[5%] lg:mt-[2.5%] text-[#404040] bg-[#EFE5FF]",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"py-6 flex justify-center space-x-8 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"SSL Pago Seguro"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(A,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"24/7 Atención al cliente"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(L,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Pago online"})]})]}),e.jsx("form",{className:"w-full rounded-lg bg-white p-8 shadow-lg",onSubmit:b,disabled:x,children:e.jsxs("div",{className:"grid gap-8 md:grid-cols-2 lg:grid-cols-5 relative",children:[e.jsxs("div",{className:"lg:col-span-3",children:[e.jsx("h2",{className:"mb-4 text-xl font-semibold",children:"Información personal"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium ",htmlFor:"firstName",children:["Nombre"," ",e.jsx("b",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"firstName",className:"w-full rounded-md border border-gray-300 p-2 text-sm outline-none",value:l.name,onChange:a=>o(t=>({...t,name:a.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium ",htmlFor:"lastName",children:["Apellidos"," ",e.jsx("b",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"lastName",className:"w-full rounded-md border border-gray-300 p-2 text-sm outline-none",value:l.lastname,onChange:a=>o(t=>({...t,lastname:a.target.value})),required:!0})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium ",htmlFor:"country",children:["País / Región"," ",e.jsx("b",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"country",className:"w-full rounded-md border border-gray-300 p-2 text-sm outline-none",value:l.country,disabled:!0,required:!0})]}),e.jsx("div",{className:"mt-4 grid gap-4 md:grid-cols-5",children:e.jsxs("div",{className:"md:col-span-3",children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium ",htmlFor:"department",children:["Región / Provincia"," ",e.jsx("b",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:"department",className:"w-full rounded-md border border-gray-300 p-2 text-sm outline-none",value:l.department,onChange:a=>o(t=>({...t,department:a.target.value})),required:!0,children:[e.jsx("option",{value:"",children:"Elige una opción"}),Object.keys(c).map((a,t)=>e.jsx("option",{value:a,children:c[a].name},t))]})]})}),c[l.department]&&e.jsx("div",{className:"mt-4 grid gap-4 md:grid-cols-5",children:Array.isArray(c[l.department].items)?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"md:col-span-3",children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium ",htmlFor:"district",children:["Distrito"," ",e.jsx("b",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:"province",className:"w-full rounded-md border border-gray-300 p-2 text-sm outline-none",value:l.province,onChange:a=>o(t=>({...t,province:a.target.value})),required:!0,children:[e.jsx("option",{value:"",children:"Elige una opción"}),c[l.department].items.map((a,t)=>e.jsx("option",{value:a,children:a},t))]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"mb-1 block text-sm font-medium  truncate text-ellipsis",htmlFor:"postalCode",title:"Código postal",children:"Código postal"}),e.jsx("input",{type:"text",id:"postalCode",className:"w-full rounded-md border border-gray-300 p-2 text-sm outline-none",value:l.zip_code,onChange:a=>o(t=>({...t,zip_code:a.target.value}))})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium  truncate text-ellipsis",htmlFor:"postalCode",title:"Código postal",children:["Departamento"," ",e.jsx("b",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"postalCode",className:"w-full rounded-md border border-gray-300 p-2 text-sm outline-none",value:l.province,onChange:a=>o(t=>({...t,province:a.target.value})),required:!0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium  truncate text-ellipsis",htmlFor:"postalCode",title:"Código postal",children:["Distrito"," ",e.jsx("b",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"postalCode",className:"w-full rounded-md border border-gray-300 p-2 text-sm outline-none",value:l.district,onChange:a=>o(t=>({...t,district:a.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium  truncate text-ellipsis",htmlFor:"postalCode",title:"Código postal",children:"Código postal"}),e.jsx("input",{type:"text",id:"postalCode",className:"w-full rounded-md border border-gray-300 p-2 text-sm outline-none",value:l.zip_code,onChange:a=>o(t=>({...t,zip_code:a.target.value}))})]})]})}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"",children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium ",htmlFor:"address",children:["Dirección completa"," ",e.jsx("b",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"address",className:"w-full rounded-md border border-gray-300 p-2 text-sm outline-none",value:l.address,placeholder:"Nombre de la calle y número de la calle",onChange:a=>o(t=>({...t,address:a.target.value})),required:!0})]})}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"md:col-span-2 lg:col-span-1",children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium ",htmlFor:"number",children:["Número"," ",e.jsx("b",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"number",className:"w-full rounded-md border border-gray-300 p-2 text-sm outline-none",value:l.number,placeholder:"Nombre de la calle y número de la calle",onChange:a=>o(t=>({...t,number:a.target.value})),required:!0})]})}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"mb-1 block text-sm font-medium ",htmlFor:"apartment",children:"Apartamento, habitación, piso, etc. (opcional)"}),e.jsx("input",{type:"text",id:"apartment",className:"w-full rounded-md border border-gray-300 p-2 text-sm outline-none",value:l.reference,onChange:a=>o(t=>({...t,reference:a.target.value}))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium ",htmlFor:"email",children:["Dirección de correo electrónico"," ",e.jsx("b",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",id:"email",className:"w-full rounded-md border border-gray-300 p-2 text-sm outline-none",value:l.email,placeholder:"Dirección de correo electrónico",onChange:a=>o(t=>({...t,email:a.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx(H,{onPhoneChange:a=>{o(t=>({...t,phone:a})),console.log("Phone actualizado:",a)}}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Teléfono actual en sale: ",l.phone]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"mb-4 text-xl font-semibold",children:"Pago"}),e.jsxs("div",{className:"rounded-md border border-gray-300",children:[e.jsxs("div",{className:"p-4 py-3 flex justify-between",children:[e.jsx("img",{className:"h-4",src:"/assets/img/checkout/culqi-logo.svg",alt:"Culqi"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("img",{className:"h-4",src:"/assets/img/checkout/cards.svg",alt:"Cards"}),e.jsx("img",{className:"h-4",src:"/assets/img/checkout/pagoefectivo.svg",alt:"Pago efectivo"}),e.jsx("img",{className:"h-4",src:"/assets/img/checkout/yape.svg",alt:"Yape"})]})]}),e.jsxs("p",{className:"text-xs bg-[#f9f9f9] p-4 px-6 rounded-b",children:["Acepta pagos con"," ",e.jsx("b",{children:"tarjetas de débito y crédito, Yape, Cuotealo BCP y PagoEfectivo"}),"(billeteras móviles, agentes y bodegas)."]})]})]}),e.jsx("div",{className:"mt-6 text-xs",children:e.jsxs("p",{className:"text-justify",children:["Sus datos personales se utilizarán para procesar su pedido, respaldar su experiencia en este sitio web y para otros fines descritos en nuestra"," ",e.jsx("a",{href:"#",className:"text-purple-600 hover:underline",children:"política de privacidad"}),"."]})})]}),e.jsx("div",{className:"lg:col-span-2 relative",children:e.jsxs("div",{className:"block sticky top-4",children:[e.jsx("h2",{className:"mb-4 text-xl font-semibold",children:"Tu pedido"}),e.jsxs("div",{className:"rounded-lg border bg-[rgb(239,229,255)] border-gray-200 p-4",children:[e.jsxs("div",{className:"mb-4 flex justify-between border-b pb-2 font-bold",children:[e.jsx("span",{className:"",children:"Producto"}),e.jsx("span",{className:"",children:"Subtotal"})]}),e.jsx("div",{className:"mb-2",children:d.map((a,t)=>e.jsxs("div",{className:"mb-1 flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"h-10 aspect-[3/4] relative",children:e.jsx("img",{className:"h-10 aspect-[3/4] object-contain object-center rounded-md border",src:`/api/items/media/${a.image}`,alt:a.name,onError:n=>n.target.src="/api/cover/thumbnail/null"})}),e.jsxs("div",{children:[e.jsx("p",{children:a.name}),e.jsx("small",{className:"text-xs text-gray-500",children:e.jsxs("span",{className:"w-6 inline-block text-nowrap",children:["×"," ",a.variations&&a.variations.length>0?a.variations.reduce((n,v)=>n+v.quantity,0):a.quantity]})})]})]}),e.jsxs("span",{className:"",children:["S/"," ",C(a.variations&&a.variations.length>0?a.variations.reduce((n,v)=>n+a.final_price*v.quantity,0):a.final_price*a.quantity)]})]},t))}),e.jsxs("div",{className:"mb-2 mt-4 flex justify-between border-b pb-2 text-sm font-bold",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["S/ ",C(u)]})]}),s&&e.jsxs("div",{className:"mb-2 mt-2 flex justify-between items-center border-b pb-2 text-sm font-bold",children:[e.jsxs("span",{children:["Cupón aplicado"," ",e.jsx(q,{content:"Eliminar",children:e.jsx("i",{className:"mdi mdi-close text-red-500 cursor-pointer",onClick:()=>h(null)})}),e.jsxs("small",{className:"block text-xs font-light",children:[s.name," ",e.jsx(q,{content:s.description,children:e.jsx("i",{className:"mdi mdi-information-outline ms-1"})})," ","(-",Math.round(s.amount*100)/100,"%)"]})]}),e.jsxs("span",{children:["S/ -",C(i)]})]}),l.department&&e.jsxs("div",{className:"mb-4 flex justify-between text-sm border-b pb-2",children:[e.jsx("span",{className:"font-bold",children:"Envío"}),e.jsx("span",{children:(S=c==null?void 0:c[l.department])==null?void 0:S.delivery})]}),e.jsxs("div",{className:"flex justify-between text-lg font-semibold",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["S/"," ",C(u-f-i)]})]})]}),!s&&e.jsxs("div",{className:"mt-6 flex",children:[e.jsx("input",{ref:N,type:"text",placeholder:"Código de cupón",className:"w-full rounded-l-md border border-gray-300 p-2 px-4 text-sm outline-none uppercase focus:border-[#C5B8D4]",value:s==null?void 0:s.name,onKeyDown:_,disabled:x}),e.jsx("button",{className:"rounded-r-md bg-[#5339B1] px-4 py-2 text-sm text-white",type:"button",onClick:y,disabled:x,children:"Aplicar"})]}),e.jsx("button",{type:"submit",className:"mt-6 w-full rounded-md bg-[#FF9900] py-3 text-white disabled:cursor-not-allowed",disabled:x,children:"PAGAR AHORA"})]})})]})})]})})]})};D((g,r)=>{B(g).render(e.jsx(R,{children:e.jsx(M,{...r,children:e.jsx(T,{...r})})}))});
