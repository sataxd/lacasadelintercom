import{j as e}from"./AboutHeader-CpM0iYLI.js";import{r as x}from"./index-B80Lgev0.js";import"./main-Br9xqDfn.js";import{C as P,S as A,H as F,a as L,b as D}from"./CouponsRest-DDJuccXv.js";import{C as R,G as k}from"./CreateReactScript-CyT_ENnh.js";import{N as C}from"./Number2Currency-e57Tgsuk.js";import{i as q}from"./tippy-react.esm-CHhA99mn.js";import{C as M}from"./Detail-BHspOWeO.js";import{B as I}from"./Base-EMiPcBfW.js";import{c as O}from"./ReactAppend-CBRQCQGz.js";import{H as z}from"./Header-CQbvVo2_.js";import{c as B}from"./createLucideIcon-Cx5eUsrb.js";import"./___vite-browser-external_commonjs-proxy-C9-083JZ.js";import"./Results-B-D6O2Fz.js";import"./index.esm-Cu-mVv1q.js";/* empty css               *//* empty css              */import"./index-DO3Aws4m.js";import"./proxy-BI9mV89-.js";/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=B("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),m={metropolitana:{name:"Lima Metropolitana",delivery:"Gratis",items:["Ate","Barranco","Bre√±a","Cercado de Lima","Chorrillos","Comas","El Agustino","Independencia","Jes√∫s Mar√≠a","La Molina","La Victoria","Lince","Los Olivos","Magdalena del Mar","Miraflores","Pueblo Libre","R√≠mac","San Borja","San Isidro","San Juan de Lurigancho","San Juan de Miraflores","San Luis","San Martin de Porres","San Miguel","Santa Anita","Santiago de Surco","Surquillo","Villa el Salvador","Villa Maria del Triunfo"]},alrededores:{name:"Lima Alrededores",delivery:"Por Shalom - Pago en destino",items:["Anc√≥n","Carabayllo","Chaclacayo","Cieneguilla","Lur√≠n","Pachac√°mac","Pucusana","Puente Piedra","Punta Hermosa","Punta Negra","San Bartolo","Lurigancho (Chosica)","Santa Mar√≠a del Mar","Santa Rosa"]},provincias:{name:"Provincias",delivery:"Por Shalom - Pago en destino",items:""}},T=new D,H=({onPhoneChange:j})=>{const[t,N]=x.useState([]),[n,l]=x.useState(null),[o,b]=x.useState(""),[u,i]=x.useState(!1),f=x.useRef(null);x.useEffect(()=>{(async()=>{try{const g=await(await fetch("/assets/data/countries_phone.json")).json();N(g);const w=g.find(y=>y.iso2==="PE");l(w||g[0])}catch(h){console.error("Error loading countries:",h)}})()},[]),x.useEffect(()=>{const d=h=>{f.current&&!f.current.contains(h.target)&&i(!1)};return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[]);const p=d=>{const h=d.target.value.replace(/\D/g,"");if(b(h),n){const g=`+${n.phoneCode.replace(/\D/g,"")}${h}`;j(g)}},v=d=>{l(d),i(!1)};return e.jsxs("div",{className:"relative w-full",children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Tel√©fono/Celular ",e.jsx("b",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex border border-gray-300 rounded-md focus-within:ring-0 focus-within:border-[#C5B8D4]",children:[e.jsxs("div",{className:"relative flex-shrink-0",ref:f,children:[e.jsxs("button",{type:"button",className:`flex items-center justify-between px-3 py-2
                         h-full border-r border-gray-300 bg-gray-50 rounded-l-md 
                         focus:outline-none focus:ring-0`,onClick:()=>i(!u),children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:`fi fi-${n==null?void 0:n.iso2.toLowerCase()} mr-1`}),e.jsxs("span",{className:"text-sm",children:["+",n==null?void 0:n.phoneCode]})]}),e.jsx($,{className:`h-4 w-4 transition-transform ${u?"rotate-180":""}`})]}),u&&e.jsx("div",{className:"absolute z-10 mt-1 w-full min-w-[280px] bg-white shadow-lg rounded-md py-1 max-h-60 overflow-auto border border-gray-200",children:t.map(d=>e.jsxs("div",{className:"px-3 py-2 hover:bg-gray-100 cursor-pointer flex items-center text-sm",onClick:()=>v(d),children:[e.jsx("span",{className:`fi fi-${d.iso2.toLowerCase()} mr-2`}),e.jsx("span",{className:"flex-1 truncate",children:d.nameES}),e.jsxs("span",{className:"text-gray-500 ml-2",children:["+",d.phoneCode]})]},d.iso2))})]}),e.jsx("input",{type:"tel",value:o,onChange:p,placeholder:"Ej: 987654321",className:`flex-1 w-full min-w-0 px-3 py-2 text-sm 
                    border-0 focus:ring-0 rounded-r-md bg-transparent`,pattern:"[0-9]*",style:{WebkitAppearance:"none"}})]}),o&&n&&e.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["N√∫mero completo: +",n.phoneCode," ",o]})]})},V=({publicKey:j,session:t})=>{var S;const N=x.useRef(null);Culqi.publicKey=j,Culqi.options({paymentMethods:{tarjeta:!0,yape:!0,billetera:!1,bancaMovil:!1,agente:!1,cuotealo:!1},installments:!0,style:{logo:`${location.origin}/assets/img/icon.png`,bannerColor:"#5339B1"}});const n=JSON.parse(localStorage.getItem("carrito"))||[],[l,o]=x.useState({name:(t==null?void 0:t.name)||null,lastname:(t==null?void 0:t.lastname)||null,dni:(t==null?void 0:t.dni)||null,email:t==null?void 0:t.email,phone:(t==null?void 0:t.phone)||null,country:"Per√∫",department:Object.keys(m).find(a=>m[a].name==(t==null?void 0:t.department))||null,province:(t==null?void 0:t.province)||null,district:(t==null?void 0:t.district)||null,zip_code:(t==null?void 0:t.zip_code)||null,address:(t==null?void 0:t.address)||null,number:(t==null?void 0:t.address_number)||null,reference:(t==null?void 0:t.address_reference)||null,comment:null}),[b,u]=x.useState(!1),[i,f]=x.useState(null),p=n.reduce((a,r)=>r.variations&&r.variations.length>0?a+r.variations.reduce((c,s)=>c+(s.final_price||r.final_price||0)*s.quantity,0):a+(r.final_price||0)*r.quantity,0),v=p*0,d=(p-v)*((i==null?void 0:i.amount)||0)/100,h=()=>{let a="Lima",r="Lima",c=null;return Array.isArray(m[l.department].items)?(a=m[l.department].name,r=l.province,c=null):(a=l.province,r=null,c=l.district),{...l,department:a,province:r,district:c}},g=async a=>{if(a.preventDefault(),b)return;u(!0);let r=null;if(!n||n.length===0){alert("Error: Tu carrito est√° vac√≠o. Agrega productos antes de continuar."),u(!1);return}if(p<=0){alert("Error: El total de la compra debe ser mayor a 0. Por favor, verifica los productos en tu carrito y actualiza la p√°gina si es necesario."),u(!1);return}if(n.some(s=>s.variations&&s.variations.length>0?s.variations.some(_=>!_.final_price&&!s.final_price):!s.final_price)){alert("Error: Algunos productos no tienen precios v√°lidos. Por favor, actualiza la p√°gina e intenta nuevamente."),u(!1);return}if(p>0){console.log("üöÄ Creando orden Culqi:",{totalPrice:p,cart:n,saleData:h()});const s=await P.order({...h(),order_number:Culqi.order_number,renewal_id:"000001",coupon:(i==null?void 0:i.name)??null},n);if(console.log("üìã Respuesta de Culqi:",s),s&&s.data&&s.data.id)r=s.data.id,Culqi.order_number=s.data.order_number,console.log("‚úÖ Orden creada exitosamente:",r);else{console.error("‚ùå Error en respuesta de Culqi:",s),alert("Error al generar la orden. Por favor, intenta nuevamente."),u(!1);return}}if(!r){alert("Error: No se pudo generar el n√∫mero de orden. Por favor, intenta nuevamente."),u(!1);return}u(!1),Culqi.settings({title:"WeFem",currency:"PEN",amount:Math.ceil((p-v-d)*100),order:r}),Culqi.open()};window.culqi=async()=>{Culqi.token?await P.token({order:Culqi.order_number,token:Culqi.token})&&(Culqi.order_number.replace(`#${k.APP_CORRELATIVE}-`,""),location.href="/thanks"):Culqi.order&&w()};const w=()=>{setInterval(()=>{if(Culqi.isOpen)return;const a=Culqi.order_number.replace(`#${k.APP_CORRELATIVE}-`,"");fetch(`/api/sales/notify/${a}`).then(r=>{location.href="/"})},500)},y=a=>{a.preventDefault();const r=(N.current.value||"").trim().toUpperCase();r&&T.save({coupon:r,amount:p,email:l==null?void 0:l.email}).then(c=>{f(c?c.data:null)})},E=a=>{a.key=="Enter"&&y(a)};return e.jsxs(e.Fragment,{children:[e.jsx(z,{showSlogan:!0,backgroundHeight:"h-0"}),e.jsx("section",{className:"px-[5%] md:px-[7.5%] lg:px-[10%] pb-[5%] mt-[7.5%] md:mt-[5%] lg:mt-[2.5%] text-[#404040] bg-[#EFE5FF]",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"py-6 flex justify-center space-x-8 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(A,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"SSL Pago Seguro"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(F,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"24/7 Atenci√≥n al cliente"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(L,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Pago online"})]})]}),e.jsx("form",{className:"w-full rounded-lg bg-white p-8 shadow-lg",onSubmit:g,disabled:b,children:e.jsxs("div",{className:"grid gap-8 md:grid-cols-2 lg:grid-cols-5 relative",children:[e.jsxs("div",{className:"lg:col-span-3",children:[e.jsx("h2",{className:"mb-4 text-xl font-semibold",children:"Informaci√≥n personal"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium ",htmlFor:"firstName",children:["Nombre"," ",e.jsx("b",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"firstName",className:"w-full rounded-md border border-gray-300 p-2 text-sm outline-none",value:l.name,onChange:a=>o(r=>({...r,name:a.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium ",htmlFor:"lastName",children:["Apellidos"," ",e.jsx("b",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"lastName",className:"w-full rounded-md border border-gray-300 p-2 text-sm outline-none",value:l.lastname,onChange:a=>o(r=>({...r,lastname:a.target.value})),required:!0})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium ",htmlFor:"dni",children:["DNI"," ",e.jsx("b",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"dni",className:"w-full rounded-md border border-gray-300 p-2 text-sm outline-none",value:l.dni,onChange:a=>o(r=>({...r,dni:a.target.value})),required:!0})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium ",htmlFor:"country",children:["Pa√≠s / Regi√≥n"," ",e.jsx("b",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"country",className:"w-full rounded-md border border-gray-300 p-2 text-sm outline-none",value:l.country,disabled:!0,required:!0})]}),e.jsx("div",{className:"mt-4 grid gap-4 md:grid-cols-5",children:e.jsxs("div",{className:"md:col-span-3",children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium ",htmlFor:"department",children:["Regi√≥n / Provincia"," ",e.jsx("b",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:"department",className:"w-full rounded-md border border-gray-300 p-2 text-sm outline-none",value:l.department,onChange:a=>o(r=>({...r,department:a.target.value})),required:!0,children:[e.jsx("option",{value:"",children:"Elige una opci√≥n"}),Object.keys(m).map((a,r)=>e.jsx("option",{value:a,children:m[a].name},r))]})]})}),m[l.department]&&e.jsx("div",{className:"mt-4 grid gap-4 md:grid-cols-5",children:Array.isArray(m[l.department].items)?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"md:col-span-3",children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium ",htmlFor:"district",children:["Distrito"," ",e.jsx("b",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:"province",className:"w-full rounded-md border border-gray-300 p-2 text-sm outline-none",value:l.province,onChange:a=>o(r=>({...r,province:a.target.value})),required:!0,children:[e.jsx("option",{value:"",children:"Elige una opci√≥n"}),m[l.department].items.map((a,r)=>e.jsx("option",{value:a,children:a},r))]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"mb-1 block text-sm font-medium  truncate text-ellipsis",htmlFor:"postalCode",title:"C√≥digo postal",children:"C√≥digo postal"}),e.jsx("input",{type:"text",id:"postalCode",className:"w-full rounded-md border border-gray-300 p-2 text-sm outline-none",value:l.zip_code,onChange:a=>o(r=>({...r,zip_code:a.target.value}))})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium  truncate text-ellipsis",htmlFor:"postalCode",title:"C√≥digo postal",children:["Departamento"," ",e.jsx("b",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"postalCode",className:"w-full rounded-md border border-gray-300 p-2 text-sm outline-none",value:l.province,onChange:a=>o(r=>({...r,province:a.target.value})),required:!0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium  truncate text-ellipsis",htmlFor:"postalCode",title:"C√≥digo postal",children:["Distrito"," ",e.jsx("b",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"postalCode",className:"w-full rounded-md border border-gray-300 p-2 text-sm outline-none",value:l.district,onChange:a=>o(r=>({...r,district:a.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium  truncate text-ellipsis",htmlFor:"postalCode",title:"C√≥digo postal",children:"C√≥digo postal"}),e.jsx("input",{type:"text",id:"postalCode",className:"w-full rounded-md border border-gray-300 p-2 text-sm outline-none",value:l.zip_code,onChange:a=>o(r=>({...r,zip_code:a.target.value}))})]})]})}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"",children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium ",htmlFor:"address",children:["Direcci√≥n completa"," ",e.jsx("b",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"address",className:"w-full rounded-md border border-gray-300 p-2 text-sm outline-none",value:l.address,placeholder:"Nombre de la calle y n√∫mero de la calle",onChange:a=>o(r=>({...r,address:a.target.value})),required:!0})]})}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"md:col-span-2 lg:col-span-1",children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium ",htmlFor:"number",children:["N√∫mero"," ",e.jsx("b",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"number",className:"w-full rounded-md border border-gray-300 p-2 text-sm outline-none",value:l.number,placeholder:"Nombre de la calle y n√∫mero de la calle",onChange:a=>o(r=>({...r,number:a.target.value})),required:!0})]})}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"mb-1 block text-sm font-medium ",htmlFor:"apartment",children:"Apartamento, habitaci√≥n, piso, etc. (referencia)"}),e.jsx("input",{type:"text",id:"apartment",className:"w-full rounded-md border border-gray-300 p-2 text-sm outline-none",value:l.reference,onChange:a=>o(r=>({...r,reference:a.target.value})),required:!0})]}),e.jsxs("div",{className:"mb-4 mt-4",children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium ",htmlFor:"email",children:["Direcci√≥n de correo electr√≥nico"," ",e.jsx("b",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",id:"email",className:"w-full rounded-md border border-gray-300 p-2 text-sm outline-none",value:l.email,placeholder:"Direcci√≥n de correo electr√≥nico",onChange:a=>o(r=>({...r,email:a.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx(H,{onPhoneChange:a=>{o(r=>({...r,phone:a})),console.log("Phone actualizado:",a)}}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Tel√©fono actual: ",l.phone]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"mb-4 text-xl font-semibold",children:"Pago"}),e.jsxs("div",{className:"rounded-md border border-gray-300",children:[e.jsxs("div",{className:"p-4 py-3 flex justify-between",children:[e.jsx("img",{className:"h-4",src:"/assets/img/checkout/culqi-logo.svg",alt:"Culqi"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("img",{className:"h-4",src:"/assets/img/checkout/cards.svg",alt:"Cards"}),e.jsx("img",{className:"h-4",src:"/assets/img/checkout/pagoefectivo.svg",alt:"Pago efectivo"}),e.jsx("img",{className:"h-4",src:"/assets/img/checkout/yape.svg",alt:"Yape"})]})]}),e.jsxs("p",{className:"text-xs bg-[#f9f9f9] p-4 px-6 rounded-b",children:["Acepta pagos con"," ",e.jsx("b",{children:"tarjetas de d√©bito y cr√©dito, Yape, Cuotealo BCP y PagoEfectivo"}),"(billeteras m√≥viles, agentes y bodegas)."]})]})]}),e.jsx("div",{className:"mt-6 text-xs",children:e.jsxs("p",{className:"text-justify",children:["Sus datos personales se utilizar√°n para procesar su pedido, respaldar su experiencia en este sitio web y para otros fines descritos en nuestra"," ",e.jsx("a",{href:"#",className:"text-purple-600 hover:underline",children:"pol√≠tica de privacidad"}),"."]})})]}),e.jsx("div",{className:"lg:col-span-2 relative",children:e.jsxs("div",{className:"block sticky top-4",children:[e.jsx("h2",{className:"mb-4 text-xl font-semibold",children:"Tu pedido"}),e.jsxs("div",{className:"rounded-lg border bg-[rgb(239,229,255)] border-gray-200 p-4",children:[e.jsxs("div",{className:"mb-4 flex justify-between border-b pb-2 font-bold",children:[e.jsx("span",{className:"",children:"Producto"}),e.jsx("span",{className:"",children:"Subtotal"})]}),e.jsx("div",{className:"mb-2",children:n.map((a,r)=>e.jsxs("div",{className:"mb-1 flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"h-10 aspect-[3/4] relative",children:e.jsx("img",{className:"h-10 aspect-[3/4] object-contain object-center rounded-md border",src:`/api/items/media/${a.image}`,alt:a.name,onError:c=>c.target.src="/api/cover/thumbnail/null"})}),e.jsxs("div",{children:[e.jsx("p",{children:a.name}),e.jsx("small",{className:"text-xs text-gray-500",children:e.jsxs("span",{className:"w-6 inline-block text-nowrap",children:["√ó"," ",a.variations&&a.variations.length>0?a.variations.reduce((c,s)=>c+s.quantity,0):a.quantity]})})]})]}),e.jsxs("span",{className:"",children:["S/"," ",C(a.variations&&a.variations.length>0?a.variations.reduce((c,s)=>c+(s.final_price||a.final_price||0)*s.quantity,0):(a.final_price||0)*a.quantity)]})]},r))}),e.jsxs("div",{className:"mb-2 mt-4 flex justify-between border-b pb-2 text-sm font-bold",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["S/ ",C(p)]})]}),i&&e.jsxs("div",{className:"mb-2 mt-2 flex justify-between items-center border-b pb-2 text-sm font-bold",children:[e.jsxs("span",{children:["Cup√≥n aplicado"," ",e.jsx(q,{content:"Eliminar",children:e.jsx("i",{className:"mdi mdi-close text-red-500 cursor-pointer",onClick:()=>f(null)})}),e.jsxs("small",{className:"block text-xs font-light",children:[i.name," ",e.jsx(q,{content:i.description,children:e.jsx("i",{className:"mdi mdi-information-outline ms-1"})})," ","(-",Math.round(i.amount*100)/100,"%)"]})]}),e.jsxs("span",{children:["S/ -",C(d)]})]}),l.department&&e.jsxs("div",{className:"mb-4 flex justify-between text-sm border-b pb-2",children:[e.jsx("span",{className:"font-bold",children:"Env√≠o"}),e.jsx("span",{children:(S=m==null?void 0:m[l.department])==null?void 0:S.delivery})]}),e.jsxs("div",{className:"flex justify-between text-lg font-semibold",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["S/"," ",C(p-v-d)]})]})]}),!i&&e.jsxs("div",{className:"mt-6 flex",children:[e.jsx("input",{ref:N,type:"text",placeholder:"C√≥digo de cup√≥n",className:"w-full rounded-l-md border border-gray-300 p-2 px-4 text-sm outline-none uppercase focus:border-[#C5B8D4]",value:i==null?void 0:i.name,onKeyDown:E,disabled:b}),e.jsx("button",{className:"rounded-r-md bg-[#5339B1] px-4 py-2 text-sm text-white",type:"button",onClick:y,disabled:b,children:"Aplicar"})]}),e.jsx("button",{type:"submit",className:"mt-6 w-full rounded-md bg-[#FF9900] py-3 text-white disabled:cursor-not-allowed",disabled:b,children:"PAGAR AHORA"})]})})]})})]})})]})};R((j,t)=>{O(j).render(e.jsx(M,{children:e.jsx(I,{...t,children:e.jsx(V,{...t})})}))});
